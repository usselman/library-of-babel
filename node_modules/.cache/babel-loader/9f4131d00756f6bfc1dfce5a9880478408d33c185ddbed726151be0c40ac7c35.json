{"ast":null,"code":"import React from'react';import{Buffer}from\"buffer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var bsOrderToTxFormat=function bsOrderToTxFormat(bsvOrder){// Parse the input BSV ordinal outpoint into its components\nvar txidHex=bsvOrder.substring(0,64);// Extract the first 64 characters as txid\nvar outputIndexHex=bsvOrder.substring(65);// Extract the remainder as outputIndex in hexadecimal\n// Convert txid to little-endian format\nvar txidBytes=Buffer.from(txidHex,'hex').reverse();// Convert output index to uint32LE (4 bytes)\nvar outputIndex=Buffer.alloc(4);outputIndex.writeUInt32LE(parseInt(outputIndexHex,16));// Concatenate txid and output index to get the final buffer\nvar txFormatBuffer=Buffer.concat([txidBytes,outputIndex]);// Convert the buffer to a hexadecimal string\nvar txFormatHex=txFormatBuffer.toString('hex');//console.log(\"converted txformat: \", txFormatHex);\nreturn txFormatHex;};var HODLMarketplaceCard=function HODLMarketplaceCard(_ref){var _listing$data,_listing$data$insc,_listing$data2,_listing$data2$list;var listing=_ref.listing,locations=_ref.locations,purchaseOrdinal=_ref.purchaseOrdinal;console.log(\"passed hodl\",listing);var lrcName;var verificationMessage=null;var verificationStyle={};var valid;// Check if 'listing.data.insc.json' exists and has 'amt' and 'op' fields\nvar inscData=listing===null||listing===void 0?void 0:(_listing$data=listing.data)===null||_listing$data===void 0?void 0:(_listing$data$insc=_listing$data.insc)===null||_listing$data$insc===void 0?void 0:_listing$data$insc.json;var amount=parseFloat(inscData===null||inscData===void 0?void 0:inscData.amt);var op=inscData===null||inscData===void 0?void 0:inscData.op;if(listing){lrcName='$hodl';var txFormat=bsOrderToTxFormat(listing.outpoint);if(locations.includes(txFormat)){verificationMessage='Valid mint √';verificationStyle={color:'green'};valid=true;}else if(listing.height===null){verificationMessage='Pending miner confirmation';verificationStyle={color:'red'};valid=false;}else{verificationMessage='Invalid mint (or sold)!';verificationStyle={color:'red'};valid=false;}}else{lrcName='unknown LRC-20';}// Check if 'amount' and 'op' are defined; if not, fall back to 'listing.origin'\nif(isNaN(amount)||!op){var _listing$origin,_originData$insc,_originData$insc$json,_originData$insc2,_originData$insc2$jso;var originData=listing===null||listing===void 0?void 0:(_listing$origin=listing.origin)===null||_listing$origin===void 0?void 0:_listing$origin.data;amount=parseFloat(originData===null||originData===void 0?void 0:(_originData$insc=originData.insc)===null||_originData$insc===void 0?void 0:(_originData$insc$json=_originData$insc.json)===null||_originData$insc$json===void 0?void 0:_originData$insc$json.amt);op=originData===null||originData===void 0?void 0:(_originData$insc2=originData.insc)===null||_originData$insc2===void 0?void 0:(_originData$insc2$jso=_originData$insc2.json)===null||_originData$insc2$jso===void 0?void 0:_originData$insc2$jso.op;}var handleBuyClick=function handleBuyClick(){var outpoint=listing.outpoint;var marketplaceRate=0.01;// Example rate, adjust as needed\nvar marketplaceAddress=\"1PSmNxwoBVcsAB3bRRccDqbFkjtBemS5qh\";// Replace with actual address\npurchaseOrdinal(outpoint,marketplaceRate,marketplaceAddress);};return valid?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"rounded-lg overflow-hidden m-4 p-4 bg-white border-4 border-black shadow-xl hover:bg-gray-300\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-bold text-lg mb-2\",children:lrcName}),verificationMessage&&/*#__PURE__*/_jsx(\"div\",{style:verificationStyle,children:verificationMessage}),/*#__PURE__*/_jsxs(\"div\",{className:\"font-bold text-lg mb-2\",children:[\"Amount: \",amount]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-0 border-black text-md rounded-xl p-4 bg-white\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-bold mb-2 underline\",children:/*#__PURE__*/_jsxs(\"a\",{href:\"https://whatsonchain.com/tx/\".concat(listing.txid),children:[op,\" tx\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"font-bold mb-2 underline\",children:/*#__PURE__*/_jsxs(\"a\",{href:\"https://whatsonchain.com/block-height/\".concat(listing.height),children:[\"blk: \",listing.height]})}),/*#__PURE__*/_jsx(\"div\",{className:\"font-bold mb-2 underline\",children:/*#__PURE__*/_jsxs(\"a\",{href:\"https://1satordinals.com/inscription/\".concat(listing.origin.num),children:[\"#\",listing.origin.num]})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm p-2\",children:[\"Owned by: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-light\",children:listing===null||listing===void 0?void 0:listing.owner})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleBuyClick,className:\"buy-btn border-0 text-md bg-blue-500 hover:bg-green-700 hover:text-white border-black rounded-xl p-4\",children:[((listing===null||listing===void 0?void 0:(_listing$data2=listing.data)===null||_listing$data2===void 0?void 0:(_listing$data2$list=_listing$data2.list)===null||_listing$data2$list===void 0?void 0:_listing$data2$list.price)/100000000).toFixed(4),\" BSV\"]})]})]}):null;};export default HODLMarketplaceCard;","map":{"version":3,"names":["React","Buffer","jsx","_jsx","jsxs","_jsxs","bsOrderToTxFormat","bsvOrder","txidHex","substring","outputIndexHex","txidBytes","from","reverse","outputIndex","alloc","writeUInt32LE","parseInt","txFormatBuffer","concat","txFormatHex","toString","HODLMarketplaceCard","_ref","_listing$data","_listing$data$insc","_listing$data2","_listing$data2$list","listing","locations","purchaseOrdinal","console","log","lrcName","verificationMessage","verificationStyle","valid","inscData","data","insc","json","amount","parseFloat","amt","op","txFormat","outpoint","includes","color","height","isNaN","_listing$origin","_originData$insc","_originData$insc$json","_originData$insc2","_originData$insc2$jso","originData","origin","handleBuyClick","marketplaceRate","marketplaceAddress","children","className","style","href","txid","num","owner","onClick","list","price","toFixed"],"sources":["/Users/shirishsarkar/Library/Mobile Documents/com~apple~CloudDocs/Documents/_CODE/library-of-babel/src/components/HODLMarketplaceCard.jsx"],"sourcesContent":["import React from 'react';\nimport { Buffer } from \"buffer\";\n\nexport const bsOrderToTxFormat = (bsvOrder) => {\n    // Parse the input BSV ordinal outpoint into its components\n    const txidHex = bsvOrder.substring(0, 64); // Extract the first 64 characters as txid\n    const outputIndexHex = bsvOrder.substring(65); // Extract the remainder as outputIndex in hexadecimal\n\n    // Convert txid to little-endian format\n    const txidBytes = Buffer.from(txidHex, 'hex').reverse();\n\n    // Convert output index to uint32LE (4 bytes)\n    const outputIndex = Buffer.alloc(4);\n    outputIndex.writeUInt32LE(parseInt(outputIndexHex, 16));\n\n    // Concatenate txid and output index to get the final buffer\n    const txFormatBuffer = Buffer.concat([txidBytes, outputIndex]);\n\n    // Convert the buffer to a hexadecimal string\n    const txFormatHex = txFormatBuffer.toString('hex');\n    //console.log(\"converted txformat: \", txFormatHex);\n    return txFormatHex;\n};\n\nconst HODLMarketplaceCard = ({ listing, locations, purchaseOrdinal }) => {\n    console.log(\"passed hodl\", listing);\n\n    let lrcName;\n    let verificationMessage = null;\n    let verificationStyle = {};\n    let valid;\n\n    // Check if 'listing.data.insc.json' exists and has 'amt' and 'op' fields\n    const inscData = listing?.data?.insc?.json;\n    let amount = parseFloat(inscData?.amt);\n    let op = inscData?.op;\n\n    if (listing) {\n        lrcName = '$hodl';\n\n        const txFormat = bsOrderToTxFormat(listing.outpoint);\n\n        if (locations.includes(txFormat)) {\n            verificationMessage = 'Valid mint √';\n            verificationStyle = { color: 'green' };\n            valid = true;\n        } else if (listing.height === null) {\n            verificationMessage = 'Pending miner confirmation';\n            verificationStyle = { color: 'red' };\n            valid = false;\n        }\n        else {\n            verificationMessage = 'Invalid mint (or sold)!';\n            verificationStyle = { color: 'red' };\n            valid = false;\n        }\n    } else {\n        lrcName = 'unknown LRC-20';\n    }\n\n    // Check if 'amount' and 'op' are defined; if not, fall back to 'listing.origin'\n    if (isNaN(amount) || !op) {\n        const originData = listing?.origin?.data;\n        amount = parseFloat(originData?.insc?.json?.amt);\n        op = originData?.insc?.json?.op;\n    }\n\n    const handleBuyClick = () => {\n        const outpoint = listing.outpoint;\n        const marketplaceRate = 0.01; // Example rate, adjust as needed\n        const marketplaceAddress = \"1PSmNxwoBVcsAB3bRRccDqbFkjtBemS5qh\"; // Replace with actual address\n\n        purchaseOrdinal(outpoint, marketplaceRate, marketplaceAddress);\n    };\n\n    return valid ? (\n        <div>\n            <div className={`rounded-lg overflow-hidden m-4 p-4 bg-white border-4 border-black shadow-xl hover:bg-gray-300`}>\n                <div className=\"px-6 py-4\">\n                    <div className=\"font-bold text-lg mb-2\">{lrcName}</div>\n                    {verificationMessage && <div style={verificationStyle}>{verificationMessage}</div>}\n                    <div className=\"font-bold text-lg mb-2\">Amount: {amount}</div>\n                    <div className=\"border-0 border-black text-md rounded-xl p-4 bg-white\">\n                        <div className=\"font-bold mb-2 underline\"><a href={`https://whatsonchain.com/tx/${listing.txid}`}>{op} tx</a></div>\n                        <div className=\"font-bold mb-2 underline\"><a href={`https://whatsonchain.com/block-height/${listing.height}`}>blk: {listing.height}</a></div>\n                        <div className=\"font-bold mb-2 underline\"><a href={`https://1satordinals.com/inscription/${listing.origin.num}`}>#{listing.origin.num}</a></div>\n                    </div>\n                </div>\n            </div>\n            <div>\n                <div className=\"text-sm p-2\">\n                    Owned by: <span className=\"font-light\">{listing?.owner}</span>\n                </div>\n                <button\n                    onClick={handleBuyClick}\n                    className=\"buy-btn border-0 text-md bg-blue-500 hover:bg-green-700 hover:text-white border-black rounded-xl p-4\">\n                    {(listing?.data?.list?.price / 100000000).toFixed(4)} BSV\n                </button>\n            </div>\n        </div>\n    ) : null;\n};\n\nexport default HODLMarketplaceCard;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}